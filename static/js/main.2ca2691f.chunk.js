(window.webpackJsonpbook_store=window.webpackJsonpbook_store||[]).push([[0],{31:function(e,t,n){e.exports=n(48)},40:function(e,t,n){},41:function(e,t,n){},42:function(e,t,n){},43:function(e,t,n){},44:function(e,t,n){},45:function(e,t,n){},47:function(e,t,n){},48:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(15),c=n.n(o),l=n(9),i=n(13),u=n(11),s=n(12),m=n(20),d=n(19),p=n(21),f=(n(40),function(e){var t=e.book,n=e.onAddedToCard;return a.a.createElement("div",{className:"BookListItem"},a.a.createElement("div",{className:"BookCover"},a.a.createElement("img",{src:t.coverImage,alt:"cover"})),a.a.createElement("div",{className:"BookDetails"},a.a.createElement("span",{className:"BookTitle"},t.title),a.a.createElement("div",{className:"BookAuthor"},t.author),a.a.createElement("div",{className:"BookPrice"},"$",t.price),a.a.createElement("button",{className:"btn btn-info",onClick:n},"Add to cart")))}),b=(n(41),function(){return a.a.createElement("h3",null,"LOADING...")}),E=(n(42),function(){return a.a.createElement("div",null,"Error")}),O=function(e){return{type:"BOOK_ADDED_TO_CART",payload:e}},h=a.a.createContext(),k=h.Provider,v=h.Consumer,y=function(){return function(e){return function(t){return a.a.createElement(v,null,function(n){return a.a.createElement(e,Object.assign({},t,{book_store_service:n}))})}}},g=(n(43),function(e){function t(){return Object(u.a)(this,t),Object(m.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.booksRequested(),this.props.book_store_service.getBooks().then(function(t){return e.props.booksLoaded(t)}).catch(function(t){return e.props.booksError(t)})}},{key:"render",value:function(){return this.props.loading?a.a.createElement(b,null):this.props.err?a.a.createElement(E,null):a.a.createElement(T,{books:this.props.books,onAddedToCard:this.props.onAddedToCard})}}]),t}(r.Component)),T=function(e){return a.a.createElement("ul",{className:"Booklist"},e.books.map(function(t){return a.a.createElement("li",{key:t.id},a.a.createElement(f,{book:t,onAddedToCard:function(){return e.onAddedToCard(t.id)}}))}))},_=y()(Object(l.b)(function(e){return{books:e.books,loading:e.loading,err:e.err}},function(e){return{booksLoaded:function(t){e(function(e){return{type:"FETCH_BOOKS_SUCCESS",payload:e}}(t))},booksRequested:function(){e({type:"FETCH_BOOKS_REQUEST"})},booksError:function(t){e(function(e){return{type:"FETCH_BOOKS_FAILURE",payload:e}}(t))},onAddedToCard:function(t){e(O(t))}}})(g)),I=(n(44),Object(l.b)(function(e){return{items:e.cartItems,orderTotal:e.orderTotal}},function(e){return{onDecrease:function(t){e({type:"BOOK_REMOVE_FROM_CART",payload:t})},onIncrease:function(t){e(O(t))},onDelete:function(t){e({type:"ALL_BOOK_REMOVE_FROM_CART",payload:t})}}})(function(e){var t=e.items,n=e.orderTotal,r=e.onDecrease,o=e.onIncrease,c=e.onDelete;return a.a.createElement("div",{className:"CardTable"},a.a.createElement("h2",null,"Your Order"),a.a.createElement("table",{className:"table"},a.a.createElement("thead",null,a.a.createElement("tr",null,a.a.createElement("th",null,"#"),a.a.createElement("th",null,"Item"),a.a.createElement("th",null,"Count"),a.a.createElement("th",null,"Price"),a.a.createElement("th",null,"Action"))),a.a.createElement("tbody",null,t.map(function(e,t){return a.a.createElement("tr",{key:e.id},a.a.createElement("td",null,t+1),a.a.createElement("td",null,e.title),a.a.createElement("td",null,e.count),a.a.createElement("td",null,"$",e.total),a.a.createElement("td",null,a.a.createElement("button",{onClick:function(){return c(e.id)},className:"btn btn-outline-danger btn-sm float-right"},a.a.createElement("i",{className:"fa fa-trash-o"})),a.a.createElement("button",{onClick:function(){return o(e.id)},className:"btn btn-outline-success btn-sm float-right"},a.a.createElement("i",{className:"fa fa-plus-circle"})),a.a.createElement("button",{onClick:function(){return r(e.id)},className:"btn btn-outline-warning btn-sm float-right"},a.a.createElement("i",{className:"fa fa-minus-circle"}))))}))),a.a.createElement("div",{className:"Total"},"Total: $",n))})),j=function(){return a.a.createElement("div",null,a.a.createElement(_,null),a.a.createElement(I,null))},C=(n(45),Object(l.b)(function(e){return{orderTotal:e.orderTotal,numItems:e.cartItems.reduce(function(e,t){return e+t.count},0)}})(function(e){var t=e.numItems,n=e.orderTotal;return a.a.createElement("header",{className:"Header row"},a.a.createElement(i.b,{to:"/",className:"Logo text-dark"},"BookStore"),a.a.createElement(i.b,{to:"/cart_page",className:"ShoppingCart"},a.a.createElement("i",{className:"CartIcon fa fa-shopping-cart"}),t," items ($",n,")"))})),A=n(10),w=(n(47),function(){return a.a.createElement("main",{role:"main",className:"container"},a.a.createElement(C,null),a.a.createElement(A.a,{exact:!0,path:"/",component:j}),a.a.createElement(A.a,{exact:!0,path:"/book_store-react",component:j}),a.a.createElement(A.a,{path:"/cart_page",component:I}))}),B=function(e){function t(){var e,n;Object(u.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(m.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(a)))).state={hasErrorLifecycle:!1},n}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentDidCatch",value:function(e){this.setState({hasErrorLifecycle:!0})}},{key:"render",value:function(){return this.state.hasErrorLifecycle?a.a.createElement(E,null):this.props.children}}]),t}(r.Component),N=function(){function e(){Object(u.a)(this,e),this.data=[{id:1,title:"Java Script",author:"Susan J. Fowler",price:32,coverImage:"https://img.yakaboo.ua/media/catalog/product/cache/1/image/398x565/234c7c011ba026e66d29567e1be1d1f7/1/0/1019046801.jpg"},{id:2,title:"Angular",author:"Michael T. Forest",price:18,coverImage:"https://proglib.io/wp-content/uploads/2017/05/orm_front_cover.jpg"},{id:3,title:"React",author:"Ivanna L. Sunny",price:50,coverImage:"https://www.kv.by/sites/default/files/styles/post_picture/public/pictures/userpictures/2019/06/18/1/b02.jpg?itok=DCvgxY6e"}]}return Object(s.a)(e,[{key:"getBooks",value:function(){var e=this;return new Promise(function(t,n){setTimeout(function(){t(e.data)},1e3)})}}]),e}(),S=n(18),R=n(7),D=n(30);function L(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function F(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?L(n,!0).forEach(function(t){Object(D.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):L(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var K={books:[],loading:!0,err:null,cartItems:[],orderTotal:0},P=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_BOOKS_SUCCESS":return F({},e,{books:t.payload,loading:!1,err:null});case"FETCH_BOOKS_REQUEST":return F({},e,{books:[],loading:!0,err:null});case"FETCH_BOOKS_FAILURE":return F({},e,{books:[],loading:!1,err:t.payload});case"BOOK_ADDED_TO_CART":var n,r=t.payload,a=e.books.find(function(e){return e.id===r}),o=e.cartItems.findIndex(function(e){return e.id===r}),c=e.cartItems[o];return c?(n=F({},c,{count:c.count+1,total:c.total+a.price}),F({},e,{orderTotal:e.orderTotal+a.price,cartItems:[].concat(Object(R.a)(e.cartItems.slice(0,o)),[n],Object(R.a)(e.cartItems.slice(o+1)))})):(n={id:a.id,title:a.title,count:1,total:a.price},F({},e,{orderTotal:e.orderTotal+a.price,cartItems:[].concat(Object(R.a)(e.cartItems),[n])}));case"ALL_BOOK_REMOVE_FROM_CART":var l=t.payload,i=e.cartItems.findIndex(function(e){return e.id===l}),u=e.cartItems[i];return F({},e,{orderTotal:e.orderTotal-u.total,cartItems:[].concat(Object(R.a)(e.cartItems.slice(0,i)),Object(R.a)(e.cartItems.slice(i+1)))});case"BOOK_REMOVE_FROM_CART":var s=t.payload,m=e.books.find(function(e){return e.id===s}),d=e.cartItems.findIndex(function(e){return e.id===s}),p=e.cartItems[d];if(p.count>1){var f=F({},p,{count:p.count-1,total:p.total-m.price});return F({},e,{orderTotal:e.orderTotal-m.price,cartItems:[].concat(Object(R.a)(e.cartItems.slice(0,d)),[f],Object(R.a)(e.cartItems.slice(d+1)))})}return F({},e,{orderTotal:e.orderTotal-m.price,cartItems:[].concat(Object(R.a)(e.cartItems.slice(0,d)),Object(R.a)(e.cartItems.slice(d+1)))});default:return e}},x=Object(S.b)(P),M=new N;c.a.render(a.a.createElement(l.a,{store:x},a.a.createElement(B,null,a.a.createElement(k,{value:M},a.a.createElement(i.a,null,a.a.createElement(w,null))))),document.getElementById("root"))}},[[31,1,2]]]);
//# sourceMappingURL=main.2ca2691f.chunk.js.map